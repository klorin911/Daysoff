<header class="app-topbar">
	@using Microsoft.AspNetCore.Components.Authorization
    @inject NavigationManager Nav
    <div class="app-topbar-inner">
        <a class="app-brand" href="">
            <span class="brand-name">Days Off</span>
            <span class="brand-pill">MVP</span>
        </a>

        <div class="app-nav-group">
            <input type="checkbox" id="app-nav-toggle" class="nav-toggle" title="Navigation menu" />
            <label class="nav-toggle-btn" for="app-nav-toggle">Menu</label>

            <nav class="app-nav-links" onclick="document.getElementById('app-nav-toggle').checked = false;">
                <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                    <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span>
                    Home
                </NavLink>

                <NavLink class="nav-link" href="schedule">
                    <span class="bi bi-calendar3" aria-hidden="true"></span>
                    Schedule
                </NavLink>

				<AuthorizeView>
					<Authorized>
						<form method="post" action="/auth/logout" style="display: inline;">
							<input type="hidden" name="returnUrl" value="@ReturnUrl" />
							<button type="submit" class="nav-link btn btn-link" style="padding: 0;">Logout</button>
						</form>
					</Authorized>
					<NotAuthorized>
						<NavLink class="nav-link" href="login">
							Login
						</NavLink>
					</NotAuthorized>
				</AuthorizeView>

            </nav>

        </div>
    </div>
</header>

@code {
    private string ReturnUrl
    {
        get
        {
            var relative = Nav.ToBaseRelativePath(Nav.Uri);
            return string.IsNullOrWhiteSpace(relative) ? "/" : (relative.StartsWith('/') ? relative : "/" + relative);
        }
    }
}

